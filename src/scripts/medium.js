const mediumQuizData = [
  {
    question: "What is the smallest country in the world by land area?",
    options: ["Monaco", "Malta", "Vatican City", "San Marino"],
    answer: "Vatican City"
  },
  {
    question: "Which scientist developed the theory of general relativity?",
    options: ["Isaac Newton", "Galileo Galilei", "Nikola Tesla", "Albert Einstein"],
    answer: "Albert Einstein"
  },
  {
    question: "Which part of the cell contains the genetic material?",
    options: ["Cytoplasm", "Mitochondria", "Nucleus", "Ribosome"],
    answer: "Nucleus"
  },
  {
    question: "Which Greek philosopher taught Alexander the Great?",
    options: ["Plato", "Aristotle", "Socrates", "Pythagoras"],
    answer: "Aristotle"
  },
  {
    question: "In what year did the Berlin Wall fall?",
    options: ["1987", "1989", "1991", "1993"],
    answer: "1989"
  },
  {
    question: "What is the chemical formula for table salt?",
    options: ["NaCl", "KCl", "H2O", "CO2"],
    answer: "NaCl"
  },
  {
    question: "Who was the first woman to win a Nobel Prize?",
    options: ["Marie Curie", "Rosalind Franklin", "Ada Lovelace", "Jane Goodall"],
    answer: "Marie Curie"
  },
  {
    question: "What is the second largest planet in the solar system?",
    options: ["Saturn", "Jupiter", "Uranus", "Neptune"],
    answer: "Saturn"
  },
  {
    question: "Which Shakespeare play features the characters Rosencrantz and Guildenstern?",
    options: ["Othello", "Hamlet", "King Lear", "Macbeth"],
    answer: "Hamlet"
  },
  {
    question: "What is the term for animals that eat both plants and meat?",
    options: ["Carnivores", "Herbivores", "Omnivores", "Insectivores"],
    answer: "Omnivores"
  },
  {
    question: "Which war was fought between the North and South regions in the United States?",
    options: ["Revolutionary War", "Vietnam War", "Civil War", "World War I"],
    answer: "Civil War"
  },
  {
    question: "Which number is represented by the Roman numeral 'L'?",
    options: ["10", "50", "100", "500"],
    answer: "50"
  },
  {
    question: "Who wrote the novel *1984*?",
    options: ["George Orwell", "Aldous Huxley", "Ray Bradbury", "J.D. Salinger"],
    answer: "George Orwell"
  },
  {
    question: "Which organelle is known as the 'powerhouse of the cell'?",
    options: ["Ribosome", "Nucleus", "Mitochondria", "Golgi apparatus"],
    answer: "Mitochondria"
  },
  {
    question: "What is the longest bone in the human body?",
    options: ["Tibia", "Femur", "Humerus", "Fibula"],
    answer: "Femur"
  },
  {
    question: "What is the currency of South Korea?",
    options: ["Won", "Yen", "Ruble", "Ringgit"],
    answer: "Won"
  },
  {
    question: "Which famous artist is known for the mural 'Guernica'?",
    options: ["Picasso", "Dali", "Monet", "Matisse"],
    answer: "Picasso"
  },
  {
    question: "In computing, what does 'CPU' stand for?",
    options: ["Central Power Unit", "Computer Processing Unit", "Central Processing Unit", "Control Processing Unit"],
    answer: "Central Processing Unit"
  },
  {
    question: "Which mountain range separates Europe and Asia?",
    options: ["Andes", "Rockies", "Ural", "Alps"],
    answer: "Ural"
  },
  {
    question: "What is the name of the process by which plants lose water vapor through their leaves?",
    options: ["Photosynthesis", "Respiration", "Transpiration", "Fermentation"],
    answer: "Transpiration"
  },
  {
    question: "Which empire built Machu Picchu?",
    options: ["Aztec", "Inca", "Mayan", "Spanish"],
    answer: "Inca"
  },
  {
    question: "What is the name of the largest moon of Saturn?",
    options: ["Titan", "Europa", "Ganymede", "Callisto"],
    answer: "Titan"
  },
  {
    question: "Which gas is most abundant in Earth’s atmosphere?",
    options: ["Oxygen", "Carbon Dioxide", "Nitrogen", "Hydrogen"],
    answer: "Nitrogen"
  },
  {
    question: "In music, how many semitones are there in an octave?",
    options: ["6", "8", "10", "12"],
    answer: "12"
  },
  {
    question: "Which blood type is known as the universal donor?",
    options: ["A", "B", "O-", "AB+"],
    answer: "O-"
  },
  {
    question: "Which desert is the largest in the world (excluding polar deserts)?",
    options: ["Gobi", "Sahara", "Kalahari", "Arabian"],
    answer: "Sahara"
  },
  {
    question: "Which continent has the most countries?",
    options: ["Asia", "Africa", "Europe", "South America"],
    answer: "Africa"
  },
  {
    question: "Which explorer is credited with circumnavigating the globe?",
    options: ["Marco Polo", "Christopher Columbus", "Ferdinand Magellan", "Vasco da Gama"],
    answer: "Ferdinand Magellan"
  },
  {
    question: "Which blood cells help fight infection?",
    options: ["Red blood cells", "White blood cells", "Platelets", "Plasma"],
    answer: "White blood cells"
  },
  {
    question: "Which layer of Earth's atmosphere contains the ozone layer?",
    options: ["Troposphere", "Stratosphere", "Mesosphere", "Thermosphere"],
    answer: "Stratosphere"
  },
  {
    question: "Which instrument measures atmospheric pressure?",
    options: ["Thermometer", "Altimeter", "Barometer", "Anemometer"],
    answer: "Barometer"
  },
  {
    question: "Which bird is known for mimicking human speech?",
    options: ["Sparrow", "Crow", "Parrot", "Dove"],
    answer: "Parrot"
  },
  {
    question: "How many hearts does an octopus have?",
    options: ["1", "2", "3", "4"],
    answer: "3"
  },
  {
    question: "What’s the capital city of Canada?",
    options: ["Toronto", "Ottawa", "Vancouver", "Montreal"],
    answer: "Ottawa"
  },
  {
    question: "Which planet rotates on its side, making its rotation unique in the solar system?",
    options: ["Saturn", "Uranus", "Neptune", "Jupiter"],
    answer: "Uranus"
  },
  {
    question: "What is the term for a word formed by the initials of a phrase?",
    options: ["Homonym", "Acronym", "Synonym", "Oxymoron"],
    answer: "Acronym"
  },
  {
    question: "What gas do plants absorb from the atmosphere during photosynthesis?",
    options: ["Oxygen", "Carbon Dioxide", "Nitrogen", "Methane"],
    answer: "Carbon Dioxide"
  },
  {
    question: "Which famous ship sank in 1912 on its maiden voyage?",
    options: ["Britannic", "Queen Mary", "Titanic", "Lusitania"],
    answer: "Titanic"
  },
  {
    question: "Which sea creature has no brain and no heart?",
    options: ["Octopus", "Starfish", "Jellyfish", "Sea urchin"],
    answer: "Jellyfish"
  },
  {
    question: "Which country invented paper?",
    options: ["India", "Greece", "China", "Egypt"],
    answer: "China"
  },
  {
    question: "What type of creature is a Komodo dragon?",
    options: ["Mammal", "Reptile", "Amphibian", "Bird"],
    answer: "Reptile"
  },
  {
    question: "Which popular board game involves buying properties and collecting rent?",
    options: ["Scrabble", "Clue", "Monopoly", "Risk"],
    answer: "Monopoly"
  },
  {
    question: "Which fictional detective lived at 221B Baker Street?",
    options: ["Hercule Poirot", "Sherlock Holmes", "Miss Marple", "Sam Spade"],
    answer: "Sherlock Holmes"
  },
  {
    question: "Which metal is liquid at room temperature?",
    options: ["Iron", "Mercury", "Lead", "Copper"],
    answer: "Mercury"
  },
  {
    question: "Which vitamin is produced when your skin is exposed to sunlight?",
    options: ["Vitamin A", "Vitamin B12", "Vitamin C", "Vitamin D"],
    answer: "Vitamin D"
  },
  {
    question: "What is the name of the fairy in Peter Pan?",
    options: ["Silvermist", "Rosetta", "Tinker Bell", "Periwinkle"],
    answer: "Tinker Bell"
  },
  {
    question: "Which country gifted the Statue of Liberty to the USA?",
    options: ["Italy", "Germany", "France", "United Kingdom"],
    answer: "France"
  },
  {
    question: "What do bees collect and use to make honey?",
    options: ["Pollen", "Sap", "Nectar", "Water"],
    answer: "Nectar"
  },
  {
    question: "Which part of the plant conducts photosynthesis?",
    options: ["Root", "Stem", "Leaf", "Flower"],
    answer: "Leaf"
  },
  {
    question: "How many players are there on a standard soccer team on the field?",
    options: ["9", "10", "11", "12"],
    answer: "11"
  },
  {
    question: "Which is the hardest natural substance on Earth?",
    options: ["Iron", "Diamond", "Granite", "Quartz"],
    answer: "Diamond"
  },
  {
    question: "Which is the only continent without reptiles or snakes?",
    options: ["Antarctica", "Europe", "Asia", "Australia"],
    answer: "Antarctica"
  },
  {
    question: "What is a baby kangaroo called?",
    options: ["Calf", "Cub", "Joey", "Kid"],
    answer: "Joey"
  },
  {
    question: "Which fictional wizard attended Hogwarts School of Witchcraft and Wizardry?",
    options: ["Gandalf", "Merlin", "Dumbledore", "Harry Potter"],
    answer: "Harry Potter"
  },
  {
    question: "Which color do you get when you mix red and white?",
    options: ["Orange", "Pink", "Peach", "Coral"],
    answer: "Pink"
  },
  {
    question: "What is the main ingredient in guacamole?",
    options: ["Tomato", "Avocado", "Lettuce", "Cucumber"],
    answer: "Avocado"
  },
  {
    question: "Which animal is known as the 'Ship of the Desert'?",
    options: ["Horse", "Camel", "Donkey", "Elephant"],
    answer: "Camel"
  },
  {
    question: "Which planet is known for its beautiful rings?",
    options: ["Mars", "Jupiter", "Saturn", "Venus"],
    answer: "Saturn"
  },
  {
    question: "What is the largest internal organ in the human body?",
    options: ["Lungs", "Liver", "Kidney", "Stomach"],
    answer: "Liver"
  },
  {
    question: "Which famous scientist wrote *A Brief History of Time*?",
    options: ["Carl Sagan", "Neil deGrasse Tyson", "Stephen Hawking", "Richard Feynman"],
    answer: "Stephen Hawking"
  }
];


function getRandomIdx(arr){
    let size = arr.length;
    let randomIdx = Math.floor(Math.random() * size);
    return randomIdx;
}
let usedIndices = []
let point = 0;
let turn = 0;
let question_counter = 0;
let timer = 100;
let timer_show_garna = 25; 
let game_win = false;
function generateQuestion(arr) {

	let randomInt;
	do {
		randomInt = getRandomIdx(arr);
	} while (usedIndices.includes(randomInt));

	usedIndices.push(randomInt);
	return arr[randomInt];
}


let q = generateQuestion(mediumQuizData);
show_element(q);

function show_element(q){

    document.getElementById("question_id").innerText = q.question;
    document.getElementById("btn1").innerText = q.options[0];
    document.getElementById("btn2").innerText = q.options[1];
    document.getElementById("btn3").innerText = q.options[2];
    document.getElementById("btn4").innerText = q.options[3];
	
}
function setCountDown(){
  setInterval(()=>{
    timer -= 4;
    timer_show_garna--;
    document.getElementById("timer-countdown").style.width = `${timer}%`
    document.getElementById("timer").innerText = `${timer_show_garna}s`
	if(timer_show_garna < 0){
		game_win = false;
		localSet()
		reset_game()
		console.log("time sako")
		return
	}
    if(timer_show_garna <= 3){
      document.getElementById("timer").style.color = 'red';

    }
  },1000)
}
setCountDown()





document.getElementById("div_id").addEventListener("click", (e) => {
    /**@type {HTMLButtonElement}*/
    let btn = e.target;
    if(["btn1", "btn2", "btn3", "btn4"].includes(btn.id)) {
		/**@type {HTMLObjectElement} */

        //this is correct ans
      let allBtn = document.querySelectorAll("#btn1,#btn2,#btn3,#btn4");
      let correctAns = Array.from(allBtn).find(x => (x.innerText === q.answer ));	
      btn.classList.add("btn_animation");
      correctAns.classList.add("btn_animation");
      btn.addEventListener('animationend',()=>{
        btn.classList.remove("btn_animation");
      })
      if(btn.innerText === q.answer){
        btn.style.background =  "#DCFCE7";
        btn.style.borderColor = "#4ADE80";
        let filteredArr = Array.from(allBtn).filter(x => x !== btn);
        btn.style.position = "relative";
        btn.classList.add("correct");

        filteredArr.forEach(element => {
          element.style.backgroundColor = "#f3f4f6";
          element.style.borderColor = "e5e7eb";
          element.style.color = "6b7280"
        });

        point++;

      }else{
        btn.style.background = "#FEE2E2";
        btn.style.borderColor = "#F87171";
        let allBtn = document.querySelectorAll("#btn1,#btn2,#btn3,#btn4");
        let filteredArr = Array.from(allBtn).filter(x => (x.innerText !== q.answer && x !== btn));
        btn.style.position = "relative";

        btn.classList.add("wrong");

        filteredArr.forEach(element => {
          element.style.backgroundColor = "#f3f4f6";
          element.style.borderColor = "e5e7eb";
          element.style.color = "6b7280"
        });    
        correctAns.style.background =  "#DCFCE7";
        correctAns.style.borderColor = "#4ADE80";
        correctAns.classList.add('correct');
      }
      turn += 20;
      question_counter++;
      document.getElementById("progress-bar").style.width = `${turn}%`;
      document.getElementById("progress-percent").innerText = `${turn}% Complete`;
      document.getElementById("question-counter").innerText = `Question ${question_counter}/5`;
      document.getElementById("question-counter-1").innerText = `Question ${question_counter}/5`
      setTimeout(()=>{
        win_loss(btn, correctAns)

      },300)


    }
})

function win_loss(btn, correctAns){
  setTimeout(()=>{
	console.log("we are inside set Time out")

		if(point === 5){
			game_win = true;
			console.log("point 5")
			localSet()
			reset_game()
			return;
		}
		if(turn === 100){
			localSet()
			reset_game()
			console.log('haryo 5 turn sako')
			return
	
		}
    btn.classList.remove("correct");
    btn.classList.remove("wrong");
    correctAns.classList.remove("correct");
		q = generateQuestion(mediumQuizData);
		show_element(q);
		reset_color()

	
  	
	},1000)
}

function localSet(){
	localStorage.setItem("points", point);
}


function reset_game(){
	usedIndices = [];
	point = 0;
	turn = 0;
	question_counter = 0;
	timer = 100;
	timer_show_garna = 25; 
	game_win = false;
	window.location.href = "./../htmls/result.html"

}



function reset_color() {
	document.getElementById("btn1").style.background = "#ffffff";
  document.getElementById("btn1").style.borderColor = "#D1D5DB";
  document.getElementById("btn1").disabled = false;

	document.getElementById("btn2").style.background = "#ffffff";
  document.getElementById("btn2").style.borderColor = "#D1D5DB";
  document.getElementById("btn2").disabled = false;

	document.getElementById("btn3").style.background = "#ffffff";
  document.getElementById("btn3").style.borderColor = "#D1D5DB";
  document.getElementById("btn3").disabled = false;

	document.getElementById("btn4").style.background = "#ffffff";
  document.getElementById("btn4").style.borderColor = "#D1D5DB";
  document.getElementById("btn4").disabled = false;

}

